{% extends 'base.html' %}

{% block title %}Mini-X | Home{% endblock %}

{% block content %}

{% if user.is_authenticated %}
<a href="{% url 'crear_post' %}" class="btn btn-primary">+ Crear Post</a>
{% endif %}

{% for post in posts %}
    <div style="border-bottom:1px solid #ccc; padding:10px;">
        <p><a href="{% url 'perfil' post.usuario.pk %}"><strong>@{{ post.usuario.username }}</strong></a></p>
        <a href="{% url 'detalle_post' post.pk %}">
            <p>{{ post.contenido }}</p>
            <p>{{ post.created_at|date:"H:i d/m/Y" }}</p>
        </a>
        <form action="{% url 'like_post_home' post.pk %}" method="post">
            {% csrf_token %}
            {% if user in post.likes.all %}
                <button class="btn btn-primary btn-sm" type="submit">
                    ‚ù§Ô∏è {{ post.total_likes }}
                </button>
                <a href="{% url 'detalle_post' post.pk %}" class="btn btn-light btn-sm">
                    üí¨ {{ post.total_comentarios }}
                </a>
            {% else %}
                <button class="btn btn-light btn-sm" type="submit">
                    ‚ù§Ô∏è {{ post.total_likes }}
                </button>
                <a href="{% url 'detalle_post' post.pk %}" class="btn btn-light btn-sm">
                    üí¨ {{ post.total_comentarios }}
                </a>
            {% endif %}
        </form>
    </div>
{% endfor %}

{% endblock %}
